(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{SwR0:function(e,t,s){"use strict";s.r(t),s.d(t,"FeedPageModule",(function(){return z}));var i=s("ofXK"),n=s("3Pt+"),o=s("TEn/"),r=s("tyNb"),a=s("HDdC"),d=s("quSY");class h extends d.a{constructor(e,t){super()}schedule(e,t=0){return this}}class l extends h{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const s=this.id,i=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(i,s,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,s=0){return setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!==s&&this.delay===s&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s=!1,i=void 0;try{this.work(e)}catch(n){s=!0,i=!!n&&n||new Error(n)}if(s)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,s=t.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&s.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let c=(()=>{class e{constructor(t,s=e.now){this.SchedulerAction=t,this.now=s}schedule(e,t=0,s){return new this.SchedulerAction(this,e).schedule(s,t)}}return e.now=()=>Date.now(),e})();class u extends c{constructor(e,t=c.now){super(e,()=>u.delegate&&u.delegate!==this?u.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,s){return u.delegate&&u.delegate!==this?u.delegate.schedule(e,t,s):super.schedule(e,t,s)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let s;this.active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}const b=new u(l);var g=s("DH7j");function p(e){const{subscriber:t,counter:s,period:i}=e;t.next(s),this.schedule({subscriber:t,counter:s+1,period:i},i)}var f=s("fXoL"),m=s("lGQG"),w=s("2g2N");let x=(()=>{class e{get nativeWindow(){return window}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=f.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(f.Db)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),y=(()=>{class e{constructor(e,t,s){this.element=e,this._window=t,this._zone=s,this.onlyGrow=!1,this.useImportant=!1,this.resized=new f.n,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style.overflow="hidden",this._onTextAreaFound())}set minRows(e){this._minRows=e,this.textAreaEl&&(this.textAreaEl.rows=e)}onInput(e){this.adjust()}ngOnDestroy(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}ngAfterContentChecked(){this.adjust()}ngOnChanges(e){this.adjust(!0)}_findNestedTextArea(){this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style.overflow="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(()=>{this._findNestedTextArea()},100))}_onTextAreaFound(){this._addWindowResizeHandler(),setTimeout(()=>{this.adjust()})}_addWindowResizeHandler(){this._windowResizeHandler=function(e,t,s=!1){let i;return function(){const n=this,o=arguments,r=function(){i=null,s||e.apply(n,o)},a=s&&!i;clearTimeout(i),i=setTimeout(r,t),a&&e.apply(n,o)}}(()=>{this._zone.run(()=>{this.adjust()})},200),this._zone.runOutsideAngular(()=>{this._window.nativeWindow.addEventListener("resize",this._windowResizeHandler,!1)})}adjust(e=!1){if(!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){const t=this.textAreaEl.value;if(!1===e&&t===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=t,this._oldWidth=this.textAreaEl.offsetWidth;const s=this.textAreaEl.cloneNode(!0),i=this.textAreaEl.parentNode;s.style.width=this.textAreaEl.offsetWidth+"px",s.style.visibility="hidden",s.style.position="absolute",s.textContent=t,i.appendChild(s),s.style.overflow="hidden",s.style.height="auto";let n=s.scrollHeight,o=this._window.nativeWindow.getComputedStyle(s,null);n+=parseInt(o.getPropertyValue("border-top-width")),n+=parseInt(o.getPropertyValue("border-bottom-width")),n+=parseInt(o.getPropertyValue("padding-top")),n+=parseInt(o.getPropertyValue("padding-bottom"));const r=this.textAreaEl.offsetHeight,a=n>r;if(!1===this.onlyGrow||a){const e=this._getLineHeight(),t=n/e;if(this._minRows&&this._minRows>=t)n=this._minRows*e;else if(this.maxRows&&this.maxRows<=t){const t=this.maxRows*e;n=this.onlyGrow?Math.max(t,r):t,this.textAreaEl.style.overflow="auto"}else this.textAreaEl.style.overflow="hidden";this.textAreaEl.style.setProperty("height",n+"px",this.useImportant?"important":""),this.resized.emit(n)}i.removeChild(s)}}_getLineHeight(){let e=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(e)&&this._window.nativeWindow.getComputedStyle){const t=this._window.nativeWindow.getComputedStyle(this.textAreaEl);e=parseInt(t.lineHeight,10)}if(isNaN(e)){const t=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");e=Math.floor(1.5*parseInt(t.replace("px",""),10))}return e}}return e.\u0275fac=function(t){return new(t||e)(f.Hb(f.l),f.Hb(x),f.Hb(f.z))},e.\u0275dir=f.Cb({type:e,selectors:[["","autosize",""]],hostBindings:function(e,t){1&e&&f.Sb("input",(function(e){return t.onInput(e.target)}))},inputs:{onlyGrow:"onlyGrow",useImportant:"useImportant",minRows:"minRows",maxRows:"maxRows"},outputs:{resized:"resized"},features:[f.vb]}),e})(),v=(()=>{class e{}return e.\u0275mod=f.Fb({type:e}),e.\u0275inj=f.Eb({factory:function(t){return new(t||e)},providers:[x],imports:[[]]}),e})();function _(e,t){if(1&e&&(f.Kb(0,"ion-col",14),f.Kb(1,"b"),f.hc(2),f.Jb(),f.Ib(3,"br"),f.Kb(4,"span"),f.hc(5),f.Jb(),f.Kb(6,"div",15),f.hc(7),f.Vb(8,"date"),f.Jb(),f.Jb()),2&e){const e=f.Ub().$implicit;f.xb(2),f.ic(e.user),f.xb(3),f.ic(e.msg),f.xb(2),f.jc(" ",f.Wb(8,3,e.created_at,"dd/MM/yyyy, h:mm a")," ")}}function A(e,t){if(1&e&&(f.Kb(0,"ion-col",16),f.Kb(1,"b"),f.hc(2,"You"),f.Jb(),f.Ib(3,"br"),f.Kb(4,"span"),f.hc(5),f.Jb(),f.Kb(6,"div",15),f.hc(7),f.Vb(8,"date"),f.Jb(),f.Jb()),2&e){const e=f.Ub().$implicit;f.xb(5),f.ic(e.msg),f.xb(2),f.jc(" ",f.Wb(8,2,e.created_at,"dd/MM/yyyy, h:mm a")," ")}}function E(e,t){if(1&e&&(f.Kb(0,"ion-row",11),f.gc(1,_,9,6,"ion-col",12),f.gc(2,A,9,5,"ion-col",13),f.Jb()),2&e){const e=t.$implicit,s=f.Ub();f.xb(1),f.Zb("ngIf",s.currentUser!==e.user),f.xb(1),f.Zb("ngIf",s.currentUser===e.user)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,s){this.router=e,this.authService=t,this.toastService=s,this.postData={id:0,msg:"",lid:0},this.messages=[{id:0,user:"Caper",created_at:1626686415106,msg:"Welcome to Caper Travel, if you have any query please write here. We will respond to you within 5 minutes during working hours."}],this.currentUser="You",this.newMsg=""}ngOnInit(){this.authService.userData$.subscribe(e=>{this.uData=e,this.postData.id=e.id,e&&this.getMessages()}),function(e=0,t=b){var s;return s=e,(Object(g.a)(s)||!(s-parseFloat(s)+1>=0)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=b),new a.a(s=>(s.add(t.schedule(p,e,{subscriber:s,counter:0,period:e})),s))}(8e3).subscribe(e=>{this.getMessages()})}getMessages(){this.postData.lid=this.messages[this.messages.length-1].id,this.authService.getMsgData(this.postData).subscribe(e=>{this.messages=this.messages.concat(e),console.log(e.length),e.length>0&&setTimeout(()=>{this.content.scrollToBottom(200)},200)},e=>{this.toastService.presentToast("Network connection error!")})}sendMessage(){this.postData.msg=this.newMsg,this.authService.getMessages(this.postData).subscribe(e=>{this.messages.push(e)},e=>{this.toastService.presentToast("Network connection error!")}),this.newMsg="",setTimeout(()=>{this.content.scrollToBottom(200)},200)}}return e.\u0275fac=function(t){return new(t||e)(f.Hb(r.g),f.Hb(m.a),f.Hb(w.a))},e.\u0275cmp=f.Bb({type:e,selectors:[["app-feed"]],viewQuery:function(e,t){var s;1&e&&f.mc(o.l,!0),2&e&&f.cc(s=f.Tb())&&(t.content=s.first)},decls:17,vars:4,consts:[["slot","start"],["defaultHref","home"],["fullscreen",""],["padding","",4,"ngFor","ngForOf"],["color","light"],["align-items-center","","no-padding",""],["size","10"],["autosize","",1,"message-input",3,"maxRows","ngModel","ngModelChange"],["size","2"],["fill","clear","color","primary",1,"msg-button",3,"disabled","click"],["name","send-sharp"],["padding",""],["size","8","class","message other-message",4,"ngIf"],["offset","4","size","8","class","message my-message",4,"ngIf"],["size","8",1,"message","other-message"],["text-right","",1,"time"],["offset","4","size","8",1,"message","my-message"]],template:function(e,t){1&e&&(f.Kb(0,"ion-header"),f.Kb(1,"ion-toolbar"),f.Kb(2,"ion-title"),f.hc(3,"Support"),f.Jb(),f.Kb(4,"ion-buttons",0),f.Ib(5,"ion-back-button",1),f.Jb(),f.Jb(),f.Jb(),f.Kb(6,"ion-content",2),f.Kb(7,"ion-grid"),f.gc(8,E,3,2,"ion-row",3),f.Jb(),f.Jb(),f.Kb(9,"ion-footer"),f.Kb(10,"ion-toolbar",4),f.Kb(11,"ion-row",5),f.Kb(12,"ion-col",6),f.Kb(13,"textarea",7),f.Sb("ngModelChange",(function(e){return t.newMsg=e})),f.Jb(),f.Jb(),f.Kb(14,"ion-col",8),f.Kb(15,"ion-button",9),f.Sb("click",(function(){return t.sendMessage()})),f.Ib(16,"ion-icon",10),f.Jb(),f.Jb(),f.Jb(),f.Jb(),f.Jb()),2&e&&(f.xb(8),f.Zb("ngForOf",t.messages),f.xb(5),f.Zb("maxRows",4)("ngModel",t.newMsg),f.xb(2),f.Zb("disabled",""===t.newMsg))},directives:[o.o,o.H,o.G,o.e,o.b,o.c,o.l,o.n,i.j,o.m,o.A,o.k,n.a,y,n.e,n.f,o.d,o.p,i.k],pipes:[i.d],styles:['ion-row[_ngcontent-%COMP%]{padding:10px}ion-col[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0}.message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:#f7f7f7;border:1px solid #f0efef}.other-message[_ngcontent-%COMP%]:before{content:"";padding:5px;width:4px;height:4px;display:inline-block;background:#f7f7f7;position:absolute;left:-5px;bottom:12px;transform:rotate(45deg)}.my-message[_ngcontent-%COMP%]{background:#d7f7b9;border:1px solid #d4f6b4;margin-right:10px}.my-message[_ngcontent-%COMP%]:after{content:"";padding:5px;width:4px;height:4px;display:inline-block;background:#d7f7b9;position:absolute;right:-6px;bottom:11px;transform:rotate(45deg)}.time[_ngcontent-%COMP%]{float:right;font-size:small;color:#777}.message-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:20px;background:#fff;resize:none;padding:1px 10px}.msg-button[_ngcontent-%COMP%]{font-size:18px;--padding-start:0.5em}']}),e})()}];let M=(()=>{class e{}return e.\u0275mod=f.Fb({type:e}),e.\u0275inj=f.Eb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(I)],r.i]}),e})(),z=(()=>{class e{}return e.\u0275mod=f.Fb({type:e}),e.\u0275inj=f.Eb({factory:function(t){return new(t||e)},imports:[[i.b,n.b,o.I,M,v]]}),e})()}}]);